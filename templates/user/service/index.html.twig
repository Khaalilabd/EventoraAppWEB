<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>{% block title %}eventora{% endblock %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'><text y='1.2em' font-size='96'>⚫️</text><text y='1.3em' x='0.2em' font-size='76' fill='%23fff'>sf</text></svg>">

        {% block stylesheets %}
            <link href="https://fonts.googleapis.com/css?family=Work+Sans:400,300,600,400italic,700" rel="stylesheet" type="text/css">
            <link href="https://fonts.googleapis.com/css?family=Sacramento" rel="stylesheet">
            <!-- Animate.css -->
            <link rel="stylesheet" href="{{ asset('css/animate.css') }}">
            <!-- Icomoon Icon Fonts -->
            <link rel="stylesheet" href="{{ asset('css/icomoon.css') }}">
            <!-- Bootstrap -->
            <link rel="stylesheet" href="{{ asset('css/bootstrap.css') }}">
            <!-- Magnific Popup -->
            <link rel="stylesheet" href="{{ asset('css/magnific-popup.css') }}">
            <!-- Owl Carousel -->
            <link rel="stylesheet" href="{{ asset('css/owl.carousel.min.css') }}">
            <link rel="stylesheet" href="{{ asset('css/owl.theme.default.min.css') }}">
            <!-- Theme style -->
            <link rel="stylesheet" href="{{ asset('css/style1.css') }}">
            <!-- Navbar -->
            <link rel="stylesheet" href="{{ asset('css/navbar.css') }}">
            <!-- header -->
            <link rel="stylesheet" href="{{ asset('css/header_service.css') }}">
            <!-- Fonts for card hover effect -->
            <link href="https://fonts.googleapis.com/css?family=Raleway:400,500,700|Playfair+Display:700" rel="stylesheet">
            <!-- Font Awesome for icons -->
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax Superman/libs/font-awesome/5.15.4/css/all.min.css">
            <style>
                /* Existing styles remain unchanged */
                .services-intro {
                    text-align: center;
                    padding: 40px 20px;
                    background: linear-gradient(180deg, #f8fafc, #ffffff);
                    border-radius: 16px;
                    margin: 0 auto 32px;
                    max-width: 1200px;
                }

                .intro-title {
                    font-size: 2.5rem;
                    font-weight: 700;
                    color: #1a202c;
                    margin-bottom: 16px;
                    animation: fadeIn 1s ease-in-out;
                }

                .intro-text {
                    font-size: 1.2rem;
                    color: #4a5568;
                    max-width: 800px;
                    margin: 0 auto;
                    animation: fadeIn 1.5s ease-in-out;
                }

                .card-container {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                    gap: 28px;
                    padding: 40px;
                    max-width: 1440px;
                    margin: 0 auto;
                }

                .card {
                    width: 100%;
                    height: 450px;
                    perspective: 1400px;
                    border-radius: 20px;
                    overflow: hidden;
                    box-shadow: 0 10px 28px rgba(0, 0, 0, 0.12);
                    transition: transform 0.4s ease, box-shadow 0.4s ease;
                }

                .card:hover {
                    transform: translateY(-10px);
                    box-shadow: 0 16px 40px rgba(0, 0, 0, 0.18);
                }

                .service-img {
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                    border-radius: 12px;
                    transition: transform 0.5s ease;
                }

                .content {
                    position: relative;
                    width: 100%;
                    height: 100%;
                    transform-style: preserve-3d;
                    transition: transform 0.9s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                    border-radius: 20px;
                }

                .front {
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: linear-gradient(145deg, #ffffff, #f7fafc);
                    border-radius: 20px;
                    padding: 28px;
                    display: flex;
                    flex-direction: column;
                    backface-visibility: hidden;
                    transform: rotateY(0deg);
                }

                .front-content {
                    display: flex;
                    flex-direction: column;
                    justify-content: space-between;
                    height: 100%;
                }

                .badges {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 10px;
                }

                .badge {
                    font-size: 0.9rem;
                    font-weight: 600;
                    color: #ffffff;
                    padding: 8px 14px;
                    border-radius: 24px;
                    display: inline-flex;
                    align-items: center;
                    gap: 8px;
                    transition: transform 0.3s ease;
                }

                .badge.location {
                    background-color: #4a90e2;
                }

                .badge.type-service {
                    background-color: #20c997;
                }

                .title {
                    font-size: 1.6rem;
                    font-weight: 700;
                    color: #1a202c;
                    margin: 14px 0;
                }

                .card-footer {
                    font-size: 1.2rem;
                    font-weight: 600;
                    color: #2d3748;
                    margin-top: auto;
                }

                .img {
                    position: relative;
                    overflow: hidden;
                    border-radius: 12px;
                    margin-bottom: 20-syncedpx;
                    height: 200px;
                }

                .card:hover .service-img {
                    transform: scale(1.15);
                }

                .circle {
                    position: absolute;
                    background-color: #ff6b6b;
                    border-radius: 50%;
                    opacity: 0.35;
                    transition: opacity 0.4s ease, transform 0.4s ease;
                }

                .circle#right {
                    right: 12%;
                    top: 12%;
                    width: 45px;
                    height: 45px;
                }

                /* Styles for details container */
                .details-container {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 1000;
                    background: rgba(0, 0, 0, 0.5); /* Semi-transparent overlay */
                    visibility: hidden;
                    opacity: 0;
                    transition: opacity 0.3s ease, visibility 0.3s ease;
                }

                .details-container.active {
                    visibility: visible;
                    opacity: 1;
                }

                .details-content {
                    background: #ffffff;
                    border-radius: 16px;
                    max-width: 800px; /* Increased width */
                    width: 90%;
                    padding: 32px;
                    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
                    transform: scale(0.8);
                    opacity: 0;
                    transition: transform 0.4s ease, opacity 0.4s ease;
                    position: relative;
                    max-height: 80vh;
                    overflow-y: auto;
                }

                .details-container.active .details-content {
                    transform: scale(1);
                    opacity: 1;
                }

                .details-content img {
                    width: 100%;
                    height: 200px;
                    object-fit: cover;
                    border-radius: 12px;
                    margin-bottom: 20px;
                }

                .details-content h2 {
                    font-size: 2.2rem; /* Increased font size */
                    font-weight: 700;
                    color: #1a202c;
                    margin-bottom: 16px;
                }

                .details-content p {
                    font-size: 1.2rem; /* Increased font size */
                    color: #4a5568;
                    margin-bottom: 16px;
                }

                .details-content .badges {
                    margin-bottom: 16px;
                }

                .details-content .badge {
                    font-size: 1.1rem; /* Increased font size */
                    padding: 10px 16px; /* Slightly larger padding for readability */
                }

                .details-content .close-btn {
                    position: absolute;
                    top: 16px;
                    right: 16px;
                    background: #ff6b6b;
                    color: #fff;
                    border: none;
                    border-radius: 50%;
                    width: 32px;
                    height: 32px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    transition: background 0.3s ease;
                }

                .details-content .close-btn:hover {
                    background: #e53e3e;
                }

                /* Blur effect on main content */
                #page.blur-active {
                    filter: blur(5px);
                }

                /* Styles pour le bouton de panier flottant */
                .cart-button {
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    background-color: #934D1A; /* Couleur cohérente avec le thème */
                    color: #ffffff;
                    width: 60px;
                    height: 60px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
                    cursor: pointer;
                    transition: transform 0.3s ease, background-color 0.3s ease;
                    z-index: 1001; /* Au-dessus des autres éléments */
                }

                .cart-button:hover {
                    background-color: #7a3e0f; /* Couleur légèrement plus foncée au survol */
                    transform: scale(1.1);
                }

                .cart-button i {
                    font-size: 24px;
                }

                .cart-count {
                    position: absolute;
                    top: -8px;
                    right: -8px;
                    background-color: #ff6b6b; /* Couleur de badge cohérente avec le thème */
                    color: #ffffff;
                    font-size: 12px;
                    font-weight: 600;
                    width: 20px;
                    height: 20px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }

                /* Assurer la responsivité pour le bouton de panier */
                @media (max-width: 480px) {
                    .cart-button {
                        width: 50px;
                        height: 50px;
                    }

                    .cart-button i {
                        font-size: 20px;
                    }

                    .cart-count {
                        font-size: 10px;
                        width: 18px;
                        height: 18px;
                    }
                }

                @media (max-width: 768px) {
                    .card-container {
                        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                        padding: 24px;
                    }

                    .card {
                        height: +)400px;
                    }

                    .title {
                        font-size: 1.4rem;
                    }

                    .img {
                        height: 180px;
                    }

                    .services-intro {
                        padding: 32px 16px;
                    }

                    .intro-title {
                        font-size: 2rem;
                    }

                    .intro-text {
                        font-size: 1rem;
                    }

                    .details-content {
                        max-width: 700px; /* Slightly smaller increase for medium screens */
                        width: 95%;
                        padding: 24px;
                    }

                    .details-content img {
                        height: 150px;
                    }

                    .details-content h2 {
                        font-size: 2rem; /* Adjusted for medium screens */
                    }

                    .details-content p {
                        font-size: 1.1rem; /* Adjusted for medium screens */
                    }

                    .details-content .badge {
                        font-size: 1rem; /* Adjusted for medium screens */
                        padding: 8px 14px;
                    }
                }

                @media (max-width: 480px) {
                    .card {
                        height: 360px;
                    }

                    .badge {
                        font-size: 0.8rem;
                        padding: 6px 10px;
                    }

                    .img {
                        height: 160px;
                    }

                    .details-content {
                        max-width: 90%; /* Full width for small screens */
                        padding: 16px;
                    }

                    .details-content img {
                        height: 120px;
                    }

                    .details-content h2 {
                        font-size: 1.8rem; /* Adjusted for small screens */
                    }

                    .details-content p {
                        font-size: 1rem; /* Adjusted for small screens */
                    }

                    .details-content .badge {
                        font-size: 0.9rem; /* Adjusted for small screens */
                        padding: 6px 12px;
                    }
                }
                #page {
                    min-height: 100vh;
                    display: flex;
                    flex-direction: column;
                    padding-top: 70px; /* Ajusté pour une navbar plus compacte */
                }

                .fh5co-nav {
                    position: fixed;
                    top: 0;
                    width: 100%;
                    z-index: 1000;
                    background: rgba(255, 255, 255, 0.9);
                    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
                    backdrop-filter: blur(10px);
                    -webkit-backdrop-filter: blur(10px);
                }

                .fh5co-nav .container {
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    padding: 10px 15px;
                    max-width: 1200px;
                    margin: 0 auto;
                }

                .fh5co-logo a {
                    font-family: 'Work Sans', sans-serif;
                    font-weight: 700;
                    font-size: 24px;
                    color: #934D1A;
                    text-decoration: none;
                }

                .user-circle {
                    display: inline-block;
                    width: 40px;
                    height: 40px;
                    line-height: 40px;
                    text-align: center;
                    border-radius: 50%;
                    background-color: #f0f0f0;
                    color: #333;
                    font-size: 20px;
                    vertical-align: middle;
                    margin-right: 8px;
                }

                .user-circle img {
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                    border-radius: 50%;
                }

                .fh5co-nav .menu-1 {
                    display: block;
                }

                .fh5co-nav .menu-1 ul {
                    display: flex;
                    align-items: center;
                    justify-content: flex-end;
                    margin: 0;
                    padding: 0;
                    list-style: none;
                }

                .fh5co-nav .menu-1 ul li {
                    margin: 0 15px;
                    position: relative;
                }

                .fh5co-nav .menu-1 ul li a {
                    font-family: 'Work Sans', sans-serif;
                    font-size: 16px;
                    color: #333;
                    text-transform: uppercase;
                    text-decoration: none;
                    transition: color 0.3s ease;
                }

                .fh5co-nav .menu-1 ul li a:hover {
                    color: #934D1A;
                }

                .fh5co-nav .menu-1 ul li.active a {
                    color: #934D1A !important;
                    font-weight: 600;
                }

                .fh5co-nav .menu-1 ul li.has-dropdown {
                    position: relative;
                }

                .fh5co-nav .menu-1 ul li.has-dropdown .dropdown {
                    display: none;
                    position: absolute;
                    top: 100%;
                    right: 0;
                    background-color: #fff;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                    list-style: none;
                    padding: 10px 0;
                    min-width: 150px;
                    z-index: 1001;
                }

                .fh5co-nav .menu-1 ul li.has-dropdown:hover .dropdown {
                    display: block !important;
                }

                .fh5co-nav .menu-1 ul li.has-dropdown .dropdown li {
                    margin: 0;
                }

                .fh5co-nav .menu-1 ul li.has-dropdown .dropdown li a {
                    padding: 10px 20px;
                    display: block;
                    font-size: 14px;
                    text-transform: none;
                    color: #333;
                }

                .fh5co-nav .menu-1 ul li.has-dropdown .dropdown li a:hover {
                    color: #007bff;
                }

                .menu-toggle {
                    display: none;
                    font-size: 24px;
                    cursor: pointer;
                    color: #333;
                    padding: 10px;
                }
                /* Styles pour le bouton Réserver */
                .reserve-btn {
                    background-color: #934D1A; /* Couleur cohérente avec le thème */
                    color: #ffffff;
                    padding: 12px 24px;
                    border: none;
                    border-radius: 8px;
                    font-size: 1.1rem;
                    font-weight: 600;
                    cursor: pointer;
                    transition: background-color 0.3s ease, transform 0.3s ease;
                    margin-top: 16px;
                    width: 100%;
                    text-align: center;
                }

                .reserve-btn:hover {
                    background-color: #7a3e0f; /* Couleur plus foncée au survol */
                    transform: scale(1.05);
                }

                .reserve-btn:focus {
                    outline: 2px solid #934D1A;
                    outline-offset: 2px;
                }
            </style>
        {% endblock %}

        <!-- Modernizr JS -->
        <script src="{{ asset('js/modernizr-2.6.2.min.js') }}"></script>
        <!-- FOR IE9 below -->
        <script src="{{ asset('js/respond.min.js') }}"></script>
        {% block javascripts_head %}{% endblock %}
    </head>
    <body>
        <div class="fh5co-loader"></div>
        {% block body %}
        <nav class="fh5co-nav" role="navigation">
            <div class="container">
                <div class="menu-toggle">
                    <i class="icon-menu"></i>
                </div>
                <div class="menu-1">
                    <ul>
                        <li ><a href="{{ path('app_home') }}">Home</a></li>
                        <li class="has-dropdown">
                            <a href="#">Réservation</a>
                             <ul class="dropdown">
                                    <li><a href="{{ path('user_reservation_personnalise_new') }}">Reservation personnalisée</a></li>
                                    <li><a href="{{ path('user_reservation_pack_new') }}">Reservation Pack</a></li>
                                </ul>
                        </li>
                        <li class="has-dropdown">
                            <a href="{{ path('user_packs') }}">Packs</a>
                        </li>
                        <li class="has-dropdown">
                            <a href="#services-section">Services</a>
                            <ul class="dropdown">
                                <li class="active"><a href="{{ path('user_services') }}">Service</a></li>
                                <li><a href="{{ path('user_sponsor') }}">Partenaire</a></li>
                            </ul>
                        </li>
                        <li><a href="{{ path('app_reclamation_new') }}">Reclamation</a></li>
                        <li><a href="{{ path('app_feedback_new') }}">Feedback</a></li>
                        <li><a href="{{ path('user_chat_ai') }}">Talk with Evi</a></li>
                        <li class="has-dropdown">
                            <a href="#">
                                <span class="user-circle">
                                    {% if app.user and app.user.image %}
                                        <img src="{{ asset('Uploads/images/' ~ app.user.image) }}" alt="Profile">
                                    {% else %}
                                        <i class="icon-user"></i>
                                    {% endif %}
                                </span>
                                Contact
                            </a>
                            <ul class="dropdown">
                                {% if app.user %}
                                    <li><a href="{{ path('app_settings') }}">Paramètres</a></li>
                                    <li><a href="{{ path('app_home') }}">Notifications</a></li>
                                    <li><a href="{{ path('app_home') }}">Historique</a></li>
                                    {% if is_granted('ROLE_ADMIN') %}
                                        <li><a href="{{ path('admin_dashboard') }}">Dashboard</a></li>
                                    {% endif %}
                                    <li><a href="{{ path('app_logout') }}">Déconnexion</a></li>
                                {% else %}
                                    <li><a href="{{ path('app_auth') }}">Connexion</a></li>
                                    <li><a href="{{ path('app_auth') }}">Inscription</a></li>
                                {% endif %}
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div id="page">
            <header id="fh5co-header" class="fh5co-cover" role="banner">
                <div id="app" class="container">
                    <card data-image="https://i.pinimg.com/474x/15/49/c6/1549c6e76659befe1795734071a36ea7.jpg">
                        <h1 slot="header">Decoration</h1>
                        <p slot="content">Notre service de décoration transforme vos espaces avec élégance et créativité. Que ce soit pour votre maison, bureau ou événement, nous concevons des ambiances uniques, adaptées à vos goûts et besoins. Faites confiance à notre expertise pour sublimer chaque détail !</p>
                    </card>
                    <card data-image="https://i.pinimg.com/736x/1e/92/c4/1e92c41b988484af5a080b0eba820538.jpg">
                        <h1 slot="header">Lumiere</h1>
                        <p slot="content">Notre service met la lumière au cœur de vos espaces. Avec des solutions d’éclairage sur mesure, nous créons des ambiances chaleureuses et modernes, jouant sur l’intensité, les couleurs et le design pour sublimer chaque pièce ou événement. Laissez vos espaces briller d’élégance !</p>
                    </card>
                    <card data-image="https://i.pinimg.com/474x/25/6e/75/256e75cd9f5e71cad09b060871e0e51b.jpg">
                        <h1 slot="header">Sono</h1>
                        <p slot="content">Notre service intègre le son pour sublimer vos espaces. Avec des systèmes audio soigneusement sélectionnés, nous créons des ambiances sonores immersives, harmonisées à votre style et vos événements. Du design discret à la qualité exceptionnelle, laissez le son magnifier chaque instant !</p>
                    </card>
                    <card data-image="https://i.pinimg.com/474x/af/99/37/af9937a06d9e315b1de6edf673bdba62.jpg">
                        <h1 slot="header">Traiteur</h1>
                        <p slot="content">Notre service de traiteur apporte une touche savoureuse à vos événements. Avec des menus raffinés et personnalisés, nous marions saveurs, élégance et créativité pour ravir vos convives. Du cocktail à la réception, chaque plat est une expérience culinaire qui sublime votre occasion !</p>
                    </card>
                    <card data-image="https://i.pinimg.com/474x/f0/58/e6/f058e6c75153040684804fec0528e588.jpg">
                        <h1 slot="header">Fleuriste</h1>
                        <p slot="content">Notre service de fleuriste embellit vos espaces et événements avec des créations florales uniques. Des bouquets élégants aux arrangements sur mesure, nous apportons couleur, fraîcheur et poésie à chaque occasion. Laissez nos fleurs sublimer vos moments avec charme et raffinement !</p>
                    </card>
                </div>
            </header>
            <section id="services-section">
                <div class="services-intro" data-aos="fade-in">
                    <h2 class="intro-title">Nos Services d'Exception</h2>
                    <p class="intro-text">Découvrez nos prestations sur mesure pour sublimer vos espaces et événements avec élégance et créativité.</p>
                </div>
                <div class="card-container">
                    {% for service in GServices %}
                        <div class="card" data-aos="fade-up" data-aos-delay="{{ loop.index0 * 100 }}" role="article" aria-labelledby="service-title-{{ service.id }}" data-service-id="{{ service.id }}" data-service-title="{{ service.titre }}" data-service-description="{{ service.description }}" data-service-location="{{ service.location }}" data-service-type="{{ service.type_service }}" data-service-price="{{ service.prix }}" data-service-image="{{ asset(service.image) }}" data-service-partenaire="{{ service.sponsor.nom_partenaire }}">
                            <div class="content">
                                <div class="front">
                                    <div class="img">
                                        <img src="{{ asset(service.image) }}" alt="Image de {{ service.titre }}" class="service-img" loading="lazy">
                                        <div class="circle" id="right"></div>
                                        <div class="circle" id="bottom"></div>
                                    </div>
                                    <div class="front-content">
                                        <div class="badges">
                                            <small class="badge location"><i class="fas fa-map-marker-alt"></i> {{ service.location }}</small>
                                            <small class="badge type-service"><i class="fas fa-concierge-bell"></i> {{ service.type_service }}</small>
                                        </div>
                                        <div class="description">
                                            <div class="title">
                                                <p class="title" id="service-title-{{ service.id }}"><strong>{{ service.titre }}</strong></p>
                                            </div>
                                            <p class="card-footer">{{ service.prix }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </section>
            <!-- Bouton de panier flottant -->
            <div class="cart-button" id="cartButton" role="button" aria-label="Ouvrir le panier" tabindex="0">
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-count" id="cartCount">0</span>
            </div>
        </div>
        <!-- Details Container -->
        <div class="details-container" id="detailsContainer" role="dialog" aria-labelledby="details-title">
            <div class="details-content">
                <button class="close-btn" aria-label="Fermer les détails"><i class="fas fa-times"></i></button>
                <img id="details-image" src="" alt="">
                <h2 id="details-title"></h2>
                <div class="badges">
                    <small class="badge location" id="details-location"></small>
                    <small class="badge type-service" id="details-type"></small>
                </div>
                <p><strong>Partenaire:</strong> <span id="details-partenaire"></span></p>
                <p><strong>Description: </strong><span id="details-description"></span></p>
                <p><strong>Prix:</strong> <span id="details-price"></span></p>
                <!-- Bouton Réserver -->
                <button class="reserve-btn" id="reserveButton" aria-label="Réserver ce service">Réserver</button>
            </div>
        </div>
        {% endblock %}
        {% block javascripts %}
            <!-- Charger d'abord jQuery -->
            <script src="{{ asset('js/jquery.min.js') }}"></script>
            <!-- Ensuite, Waypoints.js -->
            <script src="https://cdn.jsdelivr.net/npm/waypoints@4.0.1/lib/jquery.waypoints.min.js"></script>
            <!-- Ensuite Stellar.js -->
            <script src="{{ asset('js/jquery.stellar.min.js') }}"></script>
            <!-- Ensuite les autres scripts -->
            <script src="{{ asset('js/bootstrap.min.js') }}"></script>
            <script src="{{ asset('js/owl.carousel.min.js') }}"></script>
            <script src="{{ asset('js/jquery.magnific-popup.min.js') }}"></script>
            <script src="{{ asset('js/simplyCountdown.js') }}"></script>
            <script src="{{ asset('js/main.js') }}"></script>
            <!-- Vue.js for card hover effect -->
            <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script>
            <!-- AOS for animations -->
            <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
            <script>
                var eventDate = new Date('2025-12-31'); // Date mise à jour dynamiquement
                simplyCountdown('.simply-countdown-one', {
                    year: eventDate.getFullYear(),
                    month: eventDate.getMonth() + 1,
                    day: eventDate.getDate(),
                    enableUtc: false
                });
            
                document.addEventListener('DOMContentLoaded', () => {
                    try {
                        // Initialisation des éléments de l'interface
                        const cards = document.querySelectorAll('.card');
                        const detailsContainer = document.getElementById('detailsContainer');
                        const detailsContent = detailsContainer.querySelector('.details-content');
                        const closeBtn = detailsContainer.querySelector('.close-btn');
                        const pageContent = document.getElementById('page');
                        const detailsImage = document.getElementById('details-image');
                        const detailsTitle = document.getElementById('details-title');
                        const detailsLocation = document.getElementById('details-location');
                        const detailsType = document.getElementById('details-type');
                        const detailsDescription = document.getElementById('details-description');
                        const detailsPrice = document.getElementById('details-price');
                        const detailsPartenaire = document.getElementById('details-partenaire');
                        const cartButton = document.getElementById('cartButton');
                        const cartCount = document.getElementById('cartCount');
                        const reserveButton = document.getElementById('reserveButton');
            
                        // Panier : stocker les services ajoutés
                        let cartItems = [];
            
                        // Récupérer les éléments du panier depuis la session au chargement
                        fetch('{{ path('app_panier_get') }}', {
                            method: 'GET',
                            headers: {
                                'X-Requested-With': 'XMLHttpRequest'
                            }
                        })
                        .then(response => {
                            if (!response.ok) {
                                throw new Error(`Erreur HTTP: ${response.status} - ${response.statusText}`);
                            }
                            return response.json();
                        })
                        .then(data => {
                            cartItems = data.cartItems || [];
                            updateCartCount(cartItems.length);
                        })
                        .catch(error => {
                            console.error('Erreur lors de la récupération du panier:', error);
                            cartItems = [];
                            updateCartCount(0);
                        });
            
                        // Gestion des clics sur les cartes pour afficher les détails
                        cards.forEach(card => {
                            card.addEventListener('click', () => {
                                detailsImage.src = card.dataset.serviceImage;
                                detailsImage.alt = `Image de ${card.dataset.serviceTitle}`;
                                detailsTitle.textContent = card.dataset.serviceTitle;
                                detailsLocation.innerHTML = `<i class="fas fa-map-marker-alt"></i> ${card.dataset.serviceLocation}`;
                                detailsType.innerHTML = `<i class="fas fa-concierge-bell"></i> ${card.dataset.serviceType}`;
                                detailsDescription.textContent = card.dataset.serviceDescription;
                                detailsPrice.textContent = card.dataset.servicePrice;
                                detailsPartenaire.textContent = card.dataset.servicePartenaire;
            
                                // Stocker l'ID du service pour le bouton Réserver
                                reserveButton.dataset.serviceId = card.dataset.serviceId;
            
                                // Afficher la fenêtre modale et appliquer le flou
                                detailsContainer.classList.add('active');
                                pageContent.classList.add('blur-active');
            
                                // Focus sur le bouton de fermeture pour l'accessibilité
                                closeBtn.focus();
                            });
                        });
            
                        // Fermer la fenêtre modale
                        closeBtn.addEventListener('click', () => {
                            detailsContainer.classList.remove('active');
                            pageContent.classList.remove('blur-active');
                        });
            
                        // Fermer en cliquant à l'extérieur
                        detailsContainer.addEventListener('click', (e) => {
                            if (e.target === detailsContainer) {
                                detailsContainer.classList.remove('active');
                                pageContent.classList.remove('blur-active');
                            }
                        });
            
                        // Fermer avec la touche Échap
                        document.addEventListener('keydown', (e) => {
                            if (e.key === 'Escape' && detailsContainer.classList.contains('active')) {
                                detailsContainer.classList.remove('active');
                                pageContent.classList.remove('blur-active');
                            }
                        });
            
                        // Gestion du focus dans la fenêtre modale pour l'accessibilité
                        const focusableElements = detailsContent.querySelectorAll('button, [tabindex]');
                        const firstFocusable = focusableElements[0];
                        const lastFocusable = focusableElements[focusableElements.length - 1];
            
                        detailsContent.addEventListener('keydown', (e) => {
                            if (e.key === 'Tab') {
                                if (e.shiftKey && document.activeElement === firstFocusable) {
                                    e.preventDefault();
                                    lastFocusable.focus();
                                } else if (!e.shiftKey && document.activeElement === lastFocusable) {
                                    e.preventDefault();
                                    firstFocusable.focus();
                                }
                            }
                        });
            
                        // Gestion du bouton Réserver
                        reserveButton.addEventListener('click', () => {
                            const serviceId = reserveButton.dataset.serviceId;
                            const service = {
                                id: serviceId,
                                quantity: 1 // Données minimales attendues par le contrôleur
                            };
            
                            // Vérifier si le service est déjà dans le panier
                            if (!cartItems.some(item => item.id === serviceId)) {
                                // Ajouter à l'affichage local du panier
                                cartItems.push({
                                    id: serviceId,
                                    title: detailsTitle.textContent,
                                    price: detailsPrice.textContent,
                                    location: detailsLocation.textContent.replace('<i class="fas fa-map-marker-alt"></i> ', ''),
                                    type: detailsType.textContent.replace('<i class="fas fa-concierge-bell"></i> ', ''),
                                    quantity: 1
                                });
                                updateCartCount(cartItems.length);
            
                                // Envoyer le nouveau service au serveur via AJAX
                                fetch('{{ path('app_panier_add') }}', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json',
                                        'X-Requested-With': 'XMLHttpRequest',
                                        'X-CSRF-Token': '{{ csrf_token('panier') }}' // Ajout du token CSRF
                                    },
                                    body: JSON.stringify({ cartItems: [service] }) // Envoyer uniquement le nouveau service
                                })
                                .then(response => {
                                    if (!response.ok) {
                                        throw new Error(`Erreur HTTP: ${response.status} - ${response.statusText}`);
                                    }
                                    return response.json();
                                })
                                .then(data => {
                                    if (data.success) {
                                        alert(`Service "${detailsTitle.textContent}" ajouté au panier !`);
                                    } else {
                                        alert(data.message || 'Erreur lors de l\'ajout au panier.');
                                        // Revenir à l'état précédent du panier si l'ajout échoue
                                        cartItems = cartItems.filter(item => item.id !== serviceId);
                                        updateCartCount(cartItems.length);
                                    }
                                })
                                .catch(error => {
                                    console.error('Erreur AJAX:', error);
                                    alert('Erreur lors de la communication avec le serveur: ' + error.message);
                                    // Revenir à l'état précédent du panier
                                    cartItems = cartItems.filter(item => item.id !== serviceId);
                                    updateCartCount(cartItems.length);
                                });
                            } else {
                                alert(`Service "${detailsTitle.textContent}" est déjà dans le panier.`);
                            }
                        });
            
                        // Gestion du bouton de panier
                        cartButton.addEventListener('click', () => {
                            window.location.href = '{{ path('app_panier_index') }}';
                        });
            
                        // Accessibilité : activer le clic au clavier pour le bouton de panier
                        cartButton.addEventListener('keydown', (e) => {
                            if (e.key === 'Enter' || e.key === ' ') {
                                e.preventDefault();
                                cartButton.click();
                            }
                        });
            
                        // Accessibilité : activer le clic au clavier pour le bouton Réserver
                        reserveButton.addEventListener('keydown', (e) => {
                            if (e.key === 'Enter' || e.key === ' ') {
                                e.preventDefault();
                                reserveButton.click();
                            }
                        });
            
                        // Fonction pour mettre à jour le compteur du panier
                        function updateCartCount(count) {
                            cartCount.textContent = count;
                        }
            
                        // Initialisation AOS pour les animations
                        if (typeof AOS !== 'undefined') {
                            AOS.init({
                                duration: 800,
                                once: true,
                                offset: 100
                            });
                        }
            
                        // Accessibilité : focus sur les cartes
                        document.querySelectorAll('.card').forEach(card => {
                            card.addEventListener('keydown', (e) => {
                                if (e.key === 'Enter' || e.key === ' ') {
                                    e.preventDefault();
                                    card.click(); // Simuler un clic pour ouvrir les détails
                                }
                            });
                        });
                    } catch (error) {
                        console.error('Erreur lors de l\'initialisation des cartes de service:', error);
                    }
                });
            
                // Vue.js Card Hover Effect
                Vue.config.devtools = true;
            
                Vue.component('card', {
                    template: `
                        <div class="card-wrap"
                            @mousemove="handleMouseMove"
                            @mouseenter="handleMouseEnter"
                            @mouseleave="handleMouseLeave"
                            ref="card">
                            <div class="card"
                                :style="cardStyle">
                                <div class="card-bg" :style="[cardBgTransform, cardBgImage]"></div>
                                <div class="card-info">
                                    <slot name="header"></slot>
                                    <slot name="content"></slot>
                                </div>
                            </div>
                        </div>`,
                    mounted() {
                        this.width = this.$refs.card.offsetWidth;
                        this.height = this.$refs.card.offsetHeight;
                    },
                    props: ['dataImage'],
                    data: () => ({
                        width: 0,
                        height: 0,
                        mouseX: 0,
                        mouseY: 0,
                        mouseLeaveDelay: null
                    }),
                    computed: {
                        mousePX() {
                            return this.mouseX / this.width;
                        },
                        mousePY() {
                            return this.mouseY / this.height;
                        },
                        cardStyle() {
                            const rX = this.mousePX * 30;
                            const rY = this.mousePY * -30;
                            return {
                                transform: `rotateY(${rX}deg) rotateX(${rY}deg)`
                            };
                        },
                        cardBgTransform() {
                            const tX = this.mousePX * -40;
                            const tY = this.mousePY * -40;
                            return {
                                transform: `translateX(${tX}px) translateY(${tY}px)`
                            };
                        },
                        cardBgImage() {
                            return {
                                backgroundImage: `url(${this.dataImage})`
                            };
                        }
                    },
                    methods: {
                        handleMouseMove(e) {
                            this.mouseX = e.pageX - this.$refs.card.offsetLeft - this.width / 2;
                            this.mouseY = e.pageY - this.$refs.card.offsetTop - this.height / 2;
                        },
                        handleMouseEnter() {
                            clearTimeout(this.mouseLeaveDelay);
                        },
                        handleMouseLeave() {
                            this.mouseLeaveDelay = setTimeout(() => {
                                this.mouseX = 0;
                                this.mouseY = 0;
                            }, 1000);
                        }
                    }
                });
            
                const app = new Vue({
                    el: '#app'
                });
            </script>
        {% endblock %}
    </body>
</html>