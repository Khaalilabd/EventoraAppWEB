<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>{% block title %}eventora{% endblock %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'><text y='1.2em' font-size='96'>⚫️</text><text y='1.3em' x='0.2em' font-size='76' fill='%23fff'>sf</text></svg>">

        {% block stylesheets %}
            <link href="https://fonts.googleapis.com/css?family=Work+Sans:400,300,600,400italic,700" rel="stylesheet" type="text/css">
            <link href="https://fonts.googleapis.com/css?family=Sacramento" rel="stylesheet">
            <!-- Animate.css -->
            <link rel="stylesheet" href="{{ asset('css/animate.css') }}">
            <!-- Icomoon Icon Fonts -->
            <link rel="stylesheet" href="{{ asset('css/icomoon.css') }}">
            <!-- Bootstrap -->
            <link rel="stylesheet" href="{{ asset('css/bootstrap.css') }}">
            <!-- Magnific Popup -->
            <link rel="stylesheet" href="{{ asset('css/magnific-popup.css') }}">
            <!-- Owl Carousel -->
            <link rel="stylesheet" href="{{ asset('css/owl.carousel.min.css') }}">
            <link rel="stylesheet" href="{{ asset('css/owl.theme.default.min.css') }}">
            <!-- Theme style -->
            <link rel="stylesheet" href="{{ asset('css/style1.css') }}">
            <!-- Navbar -->
            <link rel="stylesheet" href="{{ asset('css/navbar.css') }}">
            <!-- header -->
            <link rel="stylesheet" href="{{ asset('css/header_service.css') }}">
            <!-- Fonts for card hover effect -->
            <link href="https://fonts.googleapis.com/css?family=Raleway:400,500,700|Playfair+Display:700" rel="stylesheet">
            <!-- Font Awesome for icons -->
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
            <style>
                /* Existing styles remain unchanged */
                .services-intro {
                    text-align: center;
                    padding: 40px 20px;
                    background: linear-gradient(180deg, #f8fafc, #ffffff);
                    border-radius: 16px;
                    margin: 0 auto 32px;
                    max-width: 1200px;
                    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
                    transition: transform 0.3s ease, box-shadow 0.3s ease;
                }

                .services-intro:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.08);
                }

                .intro-title {
                    font-size: 2.5rem;
                    font-weight: 700;
                    color: #1a202c;
                    margin-bottom: 16px;
                    animation: fadeIn 1s ease-in-out;
                    position: relative;
                    display: inline-block;
                }

                .intro-title::after {
                    content: '';
                    display: block;
                    width: 60px;
                    height: 3px;
                    background: #934D1A;
                    margin: 10px auto 0;
                    border-radius: 2px;
                }

                .intro-text {
                    font-size: 1.2rem;
                    color: #4a5568;
                    max-width: 800px;
                    margin: 0 auto;
                    animation: fadeIn 1.5s ease-in-out;
                }

                .card-container {
                    display: grid;
                    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                    gap: 28px;
                    padding: 40px;
                    max-width: 1440px;
                    margin: 0 auto;
                }

                .card {
                    width: 100%;
                    height: 450px;
                    perspective: 1400px;
                    border-radius: 20px;
                    overflow: hidden;
                    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                    transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.5s ease;
                    border: 1px solid rgba(255, 255, 255, 0.1);
                }

                .card:hover {
                    transform: translateY(-10px);
                    box-shadow: 0 16px 40px rgba(0, 0, 0, 0.18);
                }

                .service-img {
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                    border-radius: 12px;
                    transition: transform 0.5s ease;
                }

                .content {
                    position: relative;
                    width: 100%;
                    height: 100%;
                    transform-style: preserve-3d;
                    transition: transform 0.9s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                    border-radius: 20px;
                }

                .front {
                    position: absolute;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: linear-gradient(145deg, #ffffff, #f9f9f9);
                    border-radius: 20px;
                    padding: 28px;
                    display: flex;
                    flex-direction: column;
                    backface-visibility: hidden;
                    transform: rotateY(0deg);
                    box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.7);
                }

                .front-content {
                    display: flex;
                    flex-direction: column;
                    justify-content: space-between;
                    height: 100%;
                }

                .badges {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 10px;
                }

                .badge {
                    font-size: 0.9rem;
                    font-weight: 600;
                    color: #ffffff;
                    padding: 8px 14px;
                    border-radius: 24px;
                    display: inline-flex;
                    align-items: center;
                    gap: 8px;
                    transition: all 0.3s ease;
                    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
                }

                .badge:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
                }

                .badge.location {
                    background: linear-gradient(135deg, #4a90e2, #357ABD);
                }

                .badge.type-service {
                    background: linear-gradient(135deg, #20c997, #0CA678);
                }

                .title {
                    font-size: 1.6rem;
                    font-weight: 700;
                    color: #1a202c;
                    margin: 14px 0;
                    transition: transform 0.3s ease;
                }

                .card:hover .title {
                    transform: translateX(5px);
                }

                .card-footer {
                    font-size: 1.2rem;
                    font-weight: 700;
                    color: #934D1A;
                    margin-top: auto;
                    transition: color 0.3s ease;
                }

                .card:hover .card-footer {
                    color: #7A3E0F;
                }

                .img {
                    position: relative;
                    overflow: hidden;
                    border-radius: 12px;
                    margin-bottom: 20px;
                    height: 200px;
                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
                }

                .card:hover .service-img {
                    transform: scale(1.15);
                }

                .circle {
                    position: absolute;
                    background-color: #ff6b6b;
                    border-radius: 50%;
                    opacity: 0.35;
                    transition: opacity 0.4s ease, transform 0.4s ease;
                }

                .circle#right {
                    right: 12%;
                    top: 12%;
                    width: 45px;
                    height: 45px;
                }

                /* Styles for details container */
                .details-container {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 1000;
                    background: rgba(0, 0, 0, 0.6);
                    visibility: hidden;
                    opacity: 0;
                    transition: opacity 0.4s ease, visibility 0.4s ease;
                    backdrop-filter: blur(5px);
                }

                .details-container.active {
                    visibility: visible;
                    opacity: 1;
                }

                .details-content {
                    background: #ffffff;
                    border-radius: 16px;
                    max-width: 800px;
                    width: 90%;
                    padding: 32px;
                    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
                    transform: scale(0.9) translateY(20px);
                    opacity: 0;
                    transition: transform 0.5s cubic-bezier(0.19, 1, 0.22, 1), opacity 0.5s ease;
                    position: relative;
                    max-height: 85vh;
                    overflow-y: auto;
                    border: 1px solid rgba(255, 255, 255, 0.2);
                }

                .details-container.active .details-content {
                    transform: scale(1) translateY(0);
                    opacity: 1;
                }

                .details-content img {
                    width: 100%;
                    height: 250px;
                    object-fit: cover;
                    border-radius: 12px;
                    margin-bottom: 24px;
                    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
                }

                .details-content h2 {
                    font-size: 2.2rem;
                    font-weight: 700;
                    color: #1a202c;
                    margin-bottom: 16px;
                    position: relative;
                    padding-bottom: 10px;
                }

                .details-content h2::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    width: 60px;
                    height: 3px;
                    background: #934D1A;
                    border-radius: 2px;
                }

                .details-content p {
                    font-size: 1.2rem;
                    color: #4a5568;
                    margin-bottom: 16px;
                    line-height: 1.6;
                }

                .details-content .badges {
                    margin-bottom: 16px;
                }

                .details-content .badge {
                    font-size: 1.1rem;
                    padding: 10px 16px;
                }

                .details-content .close-btn {
                    position: absolute;
                    top: 16px;
                    right: 16px;
                    background: #ff6b6b;
                    color: #fff;
                    border: none;
                    border-radius: 50%;
                    width: 36px;
                    height: 36px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    box-shadow: 0 2px 10px rgba(239, 68, 68, 0.3);
                    z-index: 10;
                }

                .details-content .close-btn:hover {
                    background: #e53e3e;
                    transform: rotate(90deg);
                    box-shadow: 0 5px 15px rgba(239, 68, 68, 0.4);
                }

                /* Blur effect on main content */
                #page.blur-active {
                    filter: blur(5px);
                    transition: filter 0.5s ease;
                }

                /* Styles pour le bouton de panier flottant */
                .cart-button {
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    background: linear-gradient(135deg, #934D1A, #7A3E0F);
                    color: #ffffff;
                    width: 60px;
                    height: 60px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    box-shadow: 0 4px 15px rgba(147, 77, 26, 0.3);
                    cursor: pointer;
                    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                    z-index: 1001;
                    overflow: hidden;
                }

                .cart-button::after {
                    content: '';
                    position: absolute;
                    width: 100%;
                    height: 100%;
                    background: radial-gradient(circle, rgba(255, 255, 255, 0.2) 0%, transparent 70%);
                    opacity: 0;
                    transition: opacity 0.3s ease;
                }

                .cart-button:hover {
                    transform: scale(1.1);
                    box-shadow: 0 8px 20px rgba(147, 77, 26, 0.4);
                }

                .cart-button:hover::after {
                    opacity: 1;
                }

                .cart-button i {
                    font-size: 24px;
                    transition: transform 0.3s ease;
                }

                .cart-button:hover i {
                    transform: scale(1.1);
                }

                .cart-count {
                    position: absolute;
                    top: -8px;
                    right: -8px;
                    background: #ff6b6b;
                    color: #ffffff;
                    font-size: 12px;
                    font-weight: 600;
                    width: 22px;
                    height: 22px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    box-shadow: 0 2px 5px rgba(255, 107, 107, 0.3);
                    border: 2px solid white;
                }

                /* Assurer la responsivité pour le bouton de panier */
                @media (max-width: 480px) {
                    .cart-button {
                        width: 50px;
                        height: 50px;
                    }

                    .cart-button i {
                        font-size: 20px;
                    }

                    .cart-count {
                        font-size: 10px;
                        width: 18px;
                        height: 18px;
                    }
                }

                /* Responsive adjustments for navbar */
                @media (max-width: 768px) {
                    .menu-toggle {
                        display: block;
                    }

                    .fh5co-nav .menu-1 ul {
                        display: none;
                        flex-direction: column;
                        position: absolute;
                        top: 60px;
                        left: 0;
                        width: 100%;
                        background-color: #fff;
                        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                        padding: 20px 0;
                        opacity: 0;
                        transform: translateY(-10px);
                        transition: opacity 0.3s ease, transform 0.3s ease;
                    }

                    .fh5co-nav .menu-1 ul.active {
                        display: flex;
                        opacity: 1;
                        transform: translateY(0);
                    }

                    .fh5co-nav .menu-1 ul li {
                        margin: 10px 0;
                        text-align: center;
                    }

                    .user-circle {
                        margin-right: 0;
                        margin-bottom: 5px;
                    }

                    .fh5co-nav .menu-1 ul li.has-dropdown .dropdown {
                        position: static;
                        display: none;
                        box-shadow: none;
                        background-color: #f8f9fa;
                        padding: 10px 0;
                        opacity: 1;
                        visibility: visible;
                        transition: none;
                    }

                    .fh5co-nav .menu-1 ul li.has-dropdown:hover .dropdown {
                        display: none;
                    }

                    .fh5co-nav .menu-1 ul li.has-dropdown.active .dropdown {
                        display: block;
                    }
                }

                /* Styles pour le bouton Réserver */
                .reserve-btn {
                    background: linear-gradient(135deg, #934D1A, #7A3E0F);
                    color: #ffffff;
                    padding: 12px 24px;
                    border: none;
                    border-radius: 10px;
                    font-size: 1.1rem;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    margin-top: 16px;
                    width: 100%;
                    text-align: center;
                    box-shadow: 0 5px 15px rgba(147, 77, 26, 0.2);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 10px;
                    position: relative;
                    overflow: hidden;
                }

                .reserve-btn::before {
                    content: '\f07a';
                    font-family: 'Font Awesome 5 Free';
                    font-weight: 900;
                    margin-right: 10px;
                    font-size: 1.1rem;
                }

                .reserve-btn::after {
                    content: '';
                    position: absolute;
                    width: 30px;
                    height: 100%;
                    top: 0;
                    left: -100px;
                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
                    animation: shineEffect 3s infinite;
                }

                @keyframes shineEffect {
                    0% { left: -100px; }
                    20% { left: 100%; }
                    100% { left: 100%; }
                }

                .reserve-btn:hover {
                    background: linear-gradient(135deg, #7A3E0F, #934D1A);
                    transform: translateY(-3px);
                    box-shadow: 0 8px 20px rgba(147, 77, 26, 0.3);
                }

                .reserve-btn:focus {
                    outline: none;
                    box-shadow: 0 0 0 3px rgba(147, 77, 26, 0.3);
                }

                /* Animations */
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }

                @keyframes float {
                    0% { transform: translateY(0px); }
                    50% { transform: translateY(-10px); }
                    100% { transform: translateY(0px); }
                }

                /* Système de filtrage */
                .filter-container {
                    background: linear-gradient(to right, rgba(255,255,255,0.8), rgba(255,255,255,0.95));
                    border-radius: 16px;
                    padding: 20px;
                    margin: 0 auto 30px;
                    max-width: 1200px;
                    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
                    backdrop-filter: blur(10px);
                    display: flex;
                    flex-wrap: wrap;
                    gap: 15px;
                    align-items: center;
                    justify-content: space-between;
                    transform: translateY(0);
                    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                }

                .filter-container:hover {
                    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.08);
                }

                .filter-section {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 10px;
                    align-items: center;
                }

                .filter-title {
                    font-size: 1rem;
                    font-weight: 600;
                    color: #1a202c;
                    margin-right: 5px;
                }

                .filter-btn {
                    padding: 8px 16px;
                    border-radius: 25px;
                    background: white;
                    border: 1px solid #e2e8f0;
                    color: #4a5568;
                    font-size: 0.9rem;
                    font-weight: 500;
                    cursor: pointer;
                    transition: all 0.3s ease;
                }

                .filter-btn:hover {
                    background: #f8f9fa;
                    transform: translateY(-2px);
                    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
                }

                .filter-btn.active {
                    background: #934D1A;
                    color: white;
                    border-color: #934D1A;
                }

                .search-box {
                    position: relative;
                    flex: 1;
                    min-width: 200px;
                    max-width: 300px;
                }

                .search-box input {
                    width: 100%;
                    padding: 10px 15px 10px 40px;
                    border-radius: 25px;
                    border: 1px solid #e2e8f0;
                    font-size: 0.9rem;
                    transition: all 0.3s ease;
                }

                .search-box input:focus {
                    outline: none;
                    border-color: #934D1A;
                    box-shadow: 0 0 0 3px rgba(147, 77, 26, 0.2);
                }

                .search-box i {
                    position: absolute;
                    left: 15px;
                    top: 50%;
                    transform: translateY(-50%);
                    color: #a0aec0;
                }

                /* Notifications élégantes */
                .toast-container {
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    z-index: 9999;
                    display: flex;
                    flex-direction: column;
                    gap: 10px;
                }

                .toast {
                    background: white;
                    border-radius: 8px;
                    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
                    padding: 15px 20px;
                    display: flex;
                    align-items: center;
                    gap: 15px;
                    min-width: 300px;
                    max-width: 400px;
                    transform: translateX(120%);
                    opacity: 0;
                    transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                }

                .toast.active {
                    transform: translateX(0);
                    opacity: 1;
                }

                .toast-icon {
                    width: 30px;
                    height: 30px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    flex-shrink: 0;
                }

                .toast-success .toast-icon {
                    background: #48bb78;
                }

                .toast-error .toast-icon {
                    background: #f56565;
                }

                .toast-content {
                    flex: 1;
                }

                .toast-title {
                    font-weight: 600;
                    color: #1a202c;
                    font-size: 1rem;
                    margin-bottom: 5px;
                }

                .toast-message {
                    color: #4a5568;
                    font-size: 0.9rem;
                }

                .toast-close {
                    color: #a0aec0;
                    cursor: pointer;
                    transition: color 0.3s ease;
                    background: none;
                    border: none;
                    font-size: 1.2rem;
                    padding: 0;
                    margin-left: 10px;
                }

                .toast-close:hover {
                    color: #4a5568;
                }

                /* Style pour l'affichage du mode Wishlist */
                .wishlist-badge {
                    position: absolute;
                    top: 10px;
                    right: 10px;
                    background: rgba(255, 255, 255, 0.8);
                    border-radius: 50%;
                    width: 36px;
                    height: 36px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    z-index: 10;
                    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
                }

                .wishlist-badge i {
                    color: #a0aec0;
                    font-size: 18px;
                    transition: all 0.3s ease;
                }

                .wishlist-badge:hover {
                    background: white;
                    transform: translateY(-2px);
                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
                }

                .wishlist-badge:hover i {
                    color: #f56565;
                }

                .wishlist-badge.active {
                    background: white;
                }

                .wishlist-badge.active i {
                    color: #f56565;
                }

                /* Améliorations des cartes de service */
                .card {
                    position: relative;
                    width: 100%;
                    height: 450px;
                    perspective: 1400px;
                    border-radius: 20px;
                    overflow: hidden;
                    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                    transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.5s ease;
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    background: #ffffff;
                }

                /* Indicateur de disponibilité */
                .availability-badge {
                    position: absolute;
                    top: 15px;
                    left: 15px;
                    padding: 5px 10px;
                    font-size: 0.8rem;
                    font-weight: 600;
                    color: white;
                    border-radius: 20px;
                    z-index: 5;
                    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
                }

                .available {
                    background: linear-gradient(135deg, #48bb78, #38a169);
                }

                .limited {
                    background: linear-gradient(135deg, #ed8936, #dd6b20);
                }

                .sold-out {
                    background: linear-gradient(135deg, #f56565, #e53e3e);
                }

                /* Styles pour les détails complémentaires */
                .service-features {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 8px;
                    margin-top: 15px;
                }

                .feature-tag {
                    background: #f7fafc;
                    border-radius: 15px;
                    padding: 5px 10px;
                    font-size: 0.8rem;
                    color: #4a5568;
                    display: inline-flex;
                    align-items: center;
                    gap: 5px;
                    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
                }

                .feature-tag i {
                    color: #934D1A;
                    font-size: 0.9rem;
                }

                /* Styles pour les services complémentaires */
                .related-services {
                    margin-top: 20px;
                }

                .related-services-title {
                    font-size: 1.1rem;
                    font-weight: 600;
                    color: #1a202c;
                    margin-bottom: 10px;
                    position: relative;
                    padding-left: 15px;
                }

                .related-services-title::before {
                    content: '';
                    position: absolute;
                    left: 0;
                    top: 50%;
                    transform: translateY(-50%);
                    width: 5px;
                    height: 20px;
                    background: #934D1A;
                    border-radius: 3px;
                }

                .related-services-list {
                    display: flex;
                    gap: 10px;
                    overflow-x: auto;
                    padding-bottom: 10px;
                    scrollbar-width: thin;
                    scrollbar-color: #a0aec0 #f7fafc;
                }

                .related-services-list::-webkit-scrollbar {
                    height: 6px;
                }

                .related-services-list::-webkit-scrollbar-thumb {
                    background: #a0aec0;
                    border-radius: 10px;
                }

                .related-services-list::-webkit-scrollbar-track {
                    background: #f7fafc;
                    border-radius: 10px;
                }

                .related-service-item {
                    background: #f9f9f9;
                    border-radius: 10px;
                    padding: 10px;
                    min-width: 150px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    border: 1px solid #edf2f7;
                }

                .related-service-item:hover {
                    background: white;
                    transform: translateY(-3px);
                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
                }

                .related-service-title {
                    font-size: 0.9rem;
                    font-weight: 600;
                    color: #1a202c;
                    margin-bottom: 5px;
                }

                .related-service-price {
                    font-size: 0.8rem;
                    color: #934D1A;
                    font-weight: 600;
                }
            </style>
        {% endblock %}

        <!-- Modernizr JS -->
        <script src="{{ asset('js/modernizr-2.6.2.min.js') }}"></script>
        <!-- FOR IE9 below -->
        <script src="{{ asset('js/respond.min.js') }}"></script>
        {% block javascripts_head %}{% endblock %}
    </head>
    <body>
        <div class="fh5co-loader"></div>
        {% block body %}
          <nav class="fh5co-nav" role="navigation">
            <div class="container">
                <div class="fh5co-logo">
                    <a href="{{ path('app_home') }}">Eventora</a>
                </div>
                <div class="menu-toggle">
                    <i class="icon-menu"></i>
                </div>
                <div class="menu-1">
                    <ul>
                        <li class="active"><a href="{{ path('app_home') }}">Home</a></li>
                        <li class="has-dropdown">
                            <a href="#">Reservation</a>
                            <ul class="dropdown">
                                <li><a href="{{ path('user_reservation_personnalise_new') }}">Personalized Booking</a></li>
                                <li><a href="{{ path('user_reservation_pack_new') }}">Pack Reservation</a></li>
                            </ul>
                        </li>
                        <li class="has-dropdown">
                            <a href="{{ path('user_packs') }}">Packs</a>
                        </li>
                        <li class="has-dropdown">
                            <a href="#">Services</a>
                            <ul class="dropdown">
                                <li><a href="{{ path('user_services') }}">Service</a></li>
                                <li><a href="{{ path('user_sponsor') }}">Partner</a></li>
                            </ul>
                        </li>
                        <li><a href="{{ path('app_reclamation_new') }}">Complaint</a></li>
                        <li><a href="{{ path('app_feedback_new') }}">Feedback</a></li>
                        <li><a href="{{ path('user_chat_ai') }}">Talk with Evi</a></li>
                        <li class="has-dropdown">
                            <a href="#">
                                <span class="user-circle">
                                    {% if app.user and app.user.image %}
                                        <img src="{{ asset('Uploads/images/' ~ app.user.image) }}" alt="Profile">
                                    {% else %}
                                        <i class="icon-user"></i>
                                    {% endif %}
                                </span>
                                Contact
                            </a>
                            <ul class="dropdown">
                                {% if app.user %}
                                    <li><a href="{{ path('app_settings') }}">Settings</a></li>
                                    <li><a href="{{ path('app_home') }}">Notifications</a></li>
                                    <li><a href="{{ path('app_user_history') }}">History</a></li>
                                    {% if is_granted('ROLE_ADMIN') %}
                                        <li><a href="{{ path('admin_dashboard') }}">Dashboard</a></li>
                                    {% endif %}
                                    <li><a href="{{ path('app_logout') }}">Log out</a></li>
                                {% else %}
                                    <li><a href="{{ path('discord_login') }}">Log in with Discord</a></li>
                                    <li><a href="{{ path('app_auth') }}">Log in</a></li>
                                    <li><a href="{{ path('app_auth') }}">Sign up</a></li>
                                {% endif %}
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div id="page">
            <header id="fh5co-header" class="fh5co-cover" role="banner">
                <div id="app" class="container">
                    <card data-image="https://i.pinimg.com/474x/15/49/c6/1549c6e76659befe1795734071a36ea7.jpg">
                        <h1 slot="header">Decoration</h1>
                        <p slot="content">Notre service de décoration transforme vos espaces avec élégance et créativité. Que ce soit pour votre maison, bureau ou événement, nous concevons des ambiances uniques, adaptées à vos goûts et besoins. Faites confiance à notre expertise pour sublimer chaque détail !</p>
                    </card>
                    <card data-image="https://i.pinimg.com/736x/1e/92/c4/1e92c41b988484af5a080b0eba820538.jpg">
                        <h1 slot="header">Lumiere</h1>
                        <p slot="content">Notre service met la lumière au cœur de vos espaces. Avec des solutions d'éclairage sur mesure, nous créons des ambiances chaleureuses et modernes, jouant sur l'intensité, les couleurs et le design pour sublimer chaque pièce ou événement. Laissez vos espaces briller d'élégance !</p>
                    </card>
                    <card data-image="https://i.pinimg.com/474x/25/6e/75/256e75cd9f5e71cad09b060871e0e51b.jpg">
                        <h1 slot="header">Sono</h1>
                        <p slot="content">Notre service intègre le son pour sublimer vos espaces. Avec des systèmes audio soigneusement sélectionnés, nous créons des ambiances sonores immersives, harmonisées à votre style et vos événements. Du design discret à la qualité exceptionnelle, laissez le son magnifier chaque instant !</p>
                    </card>
                    <card data-image="https://i.pinimg.com/474x/af/99/37/af9937a06d9e315b1de6edf673bdba62.jpg">
                        <h1 slot="header">Traiteur</h1>
                        <p slot="content">Notre service de traiteur apporte une touche savoureuse à vos événements. Avec des menus raffinés et personnalisés, nous marions saveurs, élégance et créativité pour ravir vos convives. Du cocktail à la réception, chaque plat est une expérience culinaire qui sublime votre occasion !</p>
                    </card>
                    <card data-image="https://i.pinimg.com/474x/f0/58/e6/f058e6c75153040684804fec0528e588.jpg">
                        <h1 slot="header">Fleuriste</h1>
                        <p slot="content">Notre service de fleuriste embellit vos espaces et événements avec des créations florales uniques. Des bouquets élégants aux arrangements sur mesure, nous apportons couleur, fraîcheur et poésie à chaque occasion. Laissez nos fleurs sublimer vos moments avec charme et raffinement !</p>
                    </card>
                </div>
            </header>
            <section id="services-section">
                <div class="services-intro" data-aos="fade-in">
                    <h2 class="intro-title">Nos Services d'Exception</h2>
                    <p class="intro-text">Découvrez nos prestations sur mesure pour sublimer vos espaces et événements avec élégance et créativité.</p>
                </div>
                
                <!-- Système de filtrage -->
                <div class="filter-container" data-aos="fade-up">
                    <div class="filter-section">
                        <span class="filter-title">Catégories :</span>
                        <button class="filter-btn active" data-filter="all">Tous</button>
                        <button class="filter-btn" data-filter="Decoration">Décoration</button>
                        <button class="filter-btn" data-filter="Lumiere">Lumière</button>
                        <button class="filter-btn" data-filter="Sono">Sono</button>
                        <button class="filter-btn" data-filter="Traiteur">Traiteur</button>
                        <button class="filter-btn" data-filter="Fleuriste">Fleuriste</button>
                    </div>
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchInput" placeholder="Rechercher un service..." aria-label="Rechercher un service">
                    </div>
                </div>
                
                <div class="card-container">
                    {% for service in GServices %}
                        <div class="card" data-aos="fade-up" data-aos-delay="{{ loop.index0 * 100 }}" role="article" aria-labelledby="service-title-{{ service.id }}" data-service-id="{{ service.id }}" data-service-title="{{ service.titre }}" data-service-description="{{ service.description }}" data-service-location="{{ service.location }}" data-service-type="{{ service.type_service }}" data-service-price="{{ service.prix }}" data-service-image="{{ asset(service.image) }}" data-service-partenaire="{{ service.sponsor.nom_partenaire }}">
                            <div class="wishlist-badge" role="button" aria-label="Ajouter aux favoris" data-id="{{ service.id }}">
                                <i class="far fa-heart"></i>
                            </div>
                            <div class="availability-badge available">Disponible</div>
                            <div class="content">
                                <div class="front">
                                    <div class="img">
                                        <img src="{{ asset(service.image) }}" alt="Image de {{ service.titre }}" class="service-img" loading="lazy">
                                        <div class="circle" id="right"></div>
                                        <div class="circle" id="bottom"></div>
                                    </div>
                                    <div class="front-content">
                                        <div class="badges">
                                            <small class="badge location"><i class="fas fa-map-marker-alt"></i> {{ service.location }}</small>
                                            <small class="badge type-service"><i class="fas fa-concierge-bell"></i> {{ service.type_service }}</small>
                                        </div>
                                        <div class="description">
                                            <div class="title">
                                                <p class="title" id="service-title-{{ service.id }}"><strong>{{ service.titre }}</strong></p>
                                            </div>
                                            <p class="card-footer">{{ service.prix }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                <div id="noResultsMessage" class="no-results" style="display: none; text-align: center; padding: 30px; background: #f9f9f9; border-radius: 10px; margin: 20px auto; max-width: 600px;">
                    <i class="fas fa-search" style="font-size: 2rem; color: #a0aec0; margin-bottom: 15px;"></i>
                    <h3>Aucun service ne correspond à votre recherche</h3>
                    <p>Essayez d'autres termes de recherche ou filtres.</p>
                </div>
            </section>
            <!-- Bouton de panier flottant -->
            <div class="cart-button" id="cartButton" role="button" aria-label="Ouvrir le panier" tabindex="0">
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-count" id="cartCount">0</span>
            </div>
        </div>
        <!-- Details Container -->
        <div class="details-container" id="detailsContainer" role="dialog" aria-labelledby="details-title">
            <div class="details-content">
                <button class="close-btn" aria-label="Fermer les détails"><i class="fas fa-times"></i></button>
                <img id="details-image" src="" alt="">
                <h2 id="details-title"></h2>
                <div class="badges">
                    <small class="badge location" id="details-location"></small>
                    <small class="badge type-service" id="details-type"></small>
                </div>
                <p><strong>Partenaire:</strong> <span id="details-partenaire"></span></p>
                <p class="service-description"><strong>Description: </strong><span id="details-description"></span></p>
                <div class="service-features">
                    <span class="feature-tag"><i class="fas fa-clock"></i> Durée: 3-5 heures</span>
                    <span class="feature-tag"><i class="fas fa-calendar-alt"></i> Disponibilité: 7j/7</span>
                    <span class="feature-tag"><i class="fas fa-users"></i> Capacité: 10-200 pers.</span>
                    <span class="feature-tag"><i class="fas fa-star"></i> Note: 4.8/5</span>
                </div>
                <p class="service-price"><strong>Prix:</strong> <span id="details-price"></span></p>
                
                <!-- Services complémentaires -->
                <div class="related-services">
                    <h4 class="related-services-title">Services complémentaires</h4>
                    <div class="related-services-list">
                        <div class="related-service-item">
                            <div class="related-service-title">Animation DJ</div>
                            <div class="related-service-price">350€</div>
                        </div>
                        <div class="related-service-item">
                            <div class="related-service-title">Éclairage Ambiance</div>
                            <div class="related-service-price">200€</div>
                        </div>
                        <div class="related-service-item">
                            <div class="related-service-title">Photo Booth</div>
                            <div class="related-service-price">150€</div>
                        </div>
                        <div class="related-service-item">
                            <div class="related-service-title">Décoration Fleurie</div>
                            <div class="related-service-price">280€</div>
                        </div>
                    </div>
                </div>
                
                <!-- Bouton Réserver -->
                <button class="reserve-btn" id="reserveButton" aria-label="Réserver ce service">Ajouter au panier</button>
            </div>
        </div>
        
        <!-- Conteneur de notifications -->
        <div class="toast-container" id="toastContainer"></div>
        {% endblock %}
        {% block javascripts %}
            <!-- Charger d'abord jQuery -->
            <script src="{{ asset('js/jquery.min.js') }}"></script>
            <!-- Ensuite, Waypoints.js -->
            <script src="https://cdn.jsdelivr.net/npm/waypoints@4.0.1/lib/jquery.waypoints.min.js"></script>
            <!-- Ensuite Stellar.js -->
            <script src="{{ asset('js/jquery.stellar.min.js') }}"></script>
            <!-- Ensuite les autres scripts -->
            <script src="{{ asset('js/bootstrap.min.js') }}"></script>
            <script src="{{ asset('js/owl.carousel.min.js') }}"></script>
            <script src="{{ asset('js/jquery.magnific-popup.min.js') }}"></script>
            <script src="{{ asset('js/simplyCountdown.js') }}"></script>
            <script src="{{ asset('js/main.js') }}"></script>
            <!-- Vue.js for card hover effect -->
            <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script>
            <!-- AOS for animations -->
            <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
            <script>
                var eventDate = new Date('2025-12-31'); // Date mise à jour dynamiquement
                simplyCountdown('.simply-countdown-one', {
                    year: eventDate.getFullYear(),
                    month: eventDate.getMonth() + 1,
                    day: eventDate.getDate(),
                    enableUtc: false
                });
            
                $(document).ready(function() {
                    // Navbar mobile toggle
                    const menuToggle = $('.menu-toggle');
                    const navMenu = $('.fh5co-nav .menu-1 ul');
                    if (menuToggle.length && navMenu.length) {
                        menuToggle.on('click', function() {
                            navMenu.toggleClass('active');
                            $(this).find('i').toggleClass('icon-menu icon-close');
                        });

                        // Close mobile menu when clicking outside
                        $(document).on('click', function(e) {
                            if (!menuToggle.is(e.target) && !navMenu.is(e.target) && navMenu.has(e.target).length === 0 && navMenu.hasClass('active')) {
                                navMenu.removeClass('active');
                                menuToggle.find('i').removeClass('icon-close').addClass('icon-menu');
                            }
                        });

                        // Close mobile menu with Escape key
                        $(document).on('keydown', function(e) {
                            if (e.key === 'Escape' && navMenu.hasClass('active')) {
                                navMenu.removeClass('active');
                                menuToggle.find('i').removeClass('icon-close').addClass('icon-menu');
                            }
                        });
                    }

                    // Handle dropdowns on mobile
                    const dropdownToggles = $('.dropdown-toggle');
                    if (dropdownToggles.length) {
                        dropdownToggles.on('click', function(e) {
                            if ($(window).width() <= 768) {
                                e.preventDefault();
                                const parentLi = $(this).parent();
                                const isActive = parentLi.hasClass('active');

                                // Close all other dropdowns
                                $('.has-dropdown').removeClass('active');
                                // Toggle current dropdown
                                if (!isActive) {
                                    parentLi.addClass('active');
                                }
                            }
                        });
                    }

                    // Set active state for Services in navbar dropdown
                    $('.fh5co-nav .menu-1 ul li.has-dropdown .dropdown li a').each(function() {
                        if ($(this).attr('href') === '{{ path('user_services') }}') {
                            $(this).closest('.has-dropdown').addClass('active');
                        }
                    });
                });

                document.addEventListener('DOMContentLoaded', () => {
                    try {
                        // Initialisation des éléments de l'interface
                        const cards = document.querySelectorAll('.card');
                        const detailsContainer = document.getElementById('detailsContainer');
                        const detailsContent = detailsContainer.querySelector('.details-content');
                        const closeBtn = detailsContainer.querySelector('.close-btn');
                        const pageContent = document.getElementById('page');
                        const detailsImage = document.getElementById('details-image');
                        const detailsTitle = document.getElementById('details-title');
                        const detailsLocation = document.getElementById('details-location');
                        const detailsType = document.getElementById('details-type');
                        const detailsDescription = document.getElementById('details-description');
                        const detailsPrice = document.getElementById('details-price');
                        const detailsPartenaire = document.getElementById('details-partenaire');
                        const cartButton = document.getElementById('cartButton');
                        const cartCount = document.getElementById('cartCount');
                        const reserveButton = document.getElementById('reserveButton');
                        const scrollProgress = document.getElementById('scrollProgress');
                        const backToTop = document.getElementById('backToTop');
                        const filterBtns = document.querySelectorAll('.filter-btn');
                        const searchInput = document.getElementById('searchInput');
                        const noResultsMessage = document.getElementById('noResultsMessage');
                        const wishlistBadges = document.querySelectorAll('.wishlist-badge');
                        const toastContainer = document.getElementById('toastContainer');
                        
                        // Fonction pour créer une notification toast
                        function showToast(type, title, message, duration = 3000) {
                            const toast = document.createElement('div');
                            toast.className = `toast toast-${type}`;
                            
                            toast.innerHTML = `
                                <div class="toast-icon">
                                    <i class="fas fa-${type === 'success' ? 'check' : 'exclamation'}"></i>
                                </div>
                                <div class="toast-content">
                                    <div class="toast-title">${title}</div>
                                    <div class="toast-message">${message}</div>
                                </div>
                                <button class="toast-close" aria-label="Fermer la notification">
                                    <i class="fas fa-times"></i>
                                </button>
                            `;
                            
                            toastContainer.appendChild(toast);
                            
                            // Animation
                            setTimeout(() => {
                                toast.classList.add('active');
                            }, 10);
                            
                            // Fermeture après la durée
                            const timeout = setTimeout(() => {
                                closeToast(toast);
                            }, duration);
                            
                            // Bouton de fermeture
                            const closeButton = toast.querySelector('.toast-close');
                            closeButton.addEventListener('click', () => {
                                clearTimeout(timeout);
                                closeToast(toast);
                            });
                        }
                        
                        function closeToast(toast) {
                            toast.classList.remove('active');
                            setTimeout(() => {
                                toast.remove();
                            }, 500);
                        }
                        
                        // Système de filtrage
                        filterBtns.forEach(btn => {
                            btn.addEventListener('click', () => {
                                // Supprimer la classe active de tous les boutons
                                filterBtns.forEach(b => b.classList.remove('active'));
                                
                                // Ajouter la classe active au bouton cliqué
                                btn.classList.add('active');
                                
                                const filterValue = btn.getAttribute('data-filter');
                                filterServices(filterValue, searchInput.value);
                            });
                        });
                        
                        // Recherche de services
                        searchInput.addEventListener('input', () => {
                            const activeFilter = document.querySelector('.filter-btn.active');
                            const filterValue = activeFilter ? activeFilter.getAttribute('data-filter') : 'all';
                            filterServices(filterValue, searchInput.value);
                        });
                        
                        // Fonction de filtrage combinant recherche et catégorie
                        function filterServices(filter, searchTerm) {
                            let visibleCount = 0;
                            
                            cards.forEach(card => {
                                const serviceTitle = card.getAttribute('data-service-title').toLowerCase();
                                const serviceType = card.getAttribute('data-service-type').toLowerCase();
                                const serviceDescription = card.getAttribute('data-service-description').toLowerCase();
                                
                                // Vérifier si le service correspond au filtre de catégorie
                                const matchesFilter = filter === 'all' || serviceType.includes(filter.toLowerCase());
                                
                                // Vérifier si le service correspond au terme de recherche
                                const matchesSearch = searchTerm === '' || 
                                    serviceTitle.includes(searchTerm.toLowerCase()) || 
                                    serviceType.includes(searchTerm.toLowerCase()) || 
                                    serviceDescription.includes(searchTerm.toLowerCase());
                                
                                // Afficher ou masquer la carte
                                if (matchesFilter && matchesSearch) {
                                    card.style.display = 'block';
                                    visibleCount++;
                                } else {
                                    card.style.display = 'none';
                                }
                            });
                            
                            // Afficher un message si aucun résultat
                            if (visibleCount === 0) {
                                noResultsMessage.style.display = 'block';
                            } else {
                                noResultsMessage.style.display = 'none';
                            }
                        }
                        
                        // Gestion des favoris
                        let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
                        
                        // Initialiser l'affichage des favoris
                        wishlistBadges.forEach(badge => {
                            const serviceId = badge.getAttribute('data-id');
                            if (wishlist.includes(serviceId)) {
                                badge.classList.add('active');
                                badge.querySelector('i').classList.remove('far');
                                badge.querySelector('i').classList.add('fas');
                            }
                            
                            badge.addEventListener('click', (e) => {
                                e.stopPropagation(); // Empêcher l'ouverture des détails du service
                                
                                const serviceId = badge.getAttribute('data-id');
                                const isActive = badge.classList.contains('active');
                                
                                if (isActive) {
                                    // Retirer des favoris
                                    badge.classList.remove('active');
                                    badge.querySelector('i').classList.remove('fas');
                                    badge.querySelector('i').classList.add('far');
                                    
                                    wishlist = wishlist.filter(id => id !== serviceId);
                                    showToast('success', 'Service retiré', 'Le service a été retiré de vos favoris');
                                } else {
                                    // Ajouter aux favoris
                                    badge.classList.add('active');
                                    badge.querySelector('i').classList.remove('far');
                                    badge.querySelector('i').classList.add('fas');
                                    
                                    wishlist.push(serviceId);
                                    showToast('success', 'Service ajouté', 'Le service a été ajouté à vos favoris');
                                }
                                
                                // Sauvegarder dans localStorage
                                localStorage.setItem('wishlist', JSON.stringify(wishlist));
                            });
                        });
            
                        // Panier : stocker les services ajoutés
                        let cartItems = [];
            
                        // Récupérer les éléments du panier depuis la session au chargement
                        fetch('{{ path('app_panier_get') }}', {
                            method: 'GET',
                            headers: {
                                'X-Requested-With': 'XMLHttpRequest'
                            }
                        })
                        .then(response => {
                            if (!response.ok) {
                                throw new Error(`Erreur HTTP: ${response.status} - ${response.statusText}`);
                            }
                            return response.json();
                        })
                        .then(data => {
                            cartItems = data.cartItems || [];
                            updateCartCount(cartItems.length);
                        })
                        .catch(error => {
                            console.error('Erreur lors de la récupération du panier:', error);
                            cartItems = [];
                            updateCartCount(0);
                        });
            
                        // Gestion des clics sur les cartes pour afficher les détails
                        cards.forEach(card => {
                            card.addEventListener('click', () => {
                                detailsImage.src = card.dataset.serviceImage;
                                detailsImage.alt = `Image de ${card.dataset.serviceTitle}`;
                                detailsTitle.textContent = card.dataset.serviceTitle;
                                detailsLocation.innerHTML = `<i class="fas fa-map-marker-alt"></i> ${card.dataset.serviceLocation}`;
                                detailsType.innerHTML = `<i class="fas fa-concierge-bell"></i> ${card.dataset.serviceType}`;
                                detailsDescription.textContent = card.dataset.serviceDescription;
                                detailsPrice.textContent = card.dataset.servicePrice;
                                detailsPartenaire.textContent = card.dataset.servicePartenaire;
            
                                // Stocker l'ID du service pour le bouton Réserver
                                reserveButton.dataset.serviceId = card.dataset.serviceId;
            
                                // Afficher la fenêtre modale et appliquer le flou
                                detailsContainer.classList.add('active');
                                pageContent.classList.add('blur-active');
            
                                // Focus sur le bouton de fermeture pour l'accessibilité
                                closeBtn.focus();
                            });
                        });
            
                        // Fermer la fenêtre modale
                        closeBtn.addEventListener('click', () => {
                            detailsContainer.classList.remove('active');
                            pageContent.classList.remove('blur-active');
                        });
            
                        // Fermer en cliquant à l'extérieur
                        detailsContainer.addEventListener('click', (e) => {
                            if (e.target === detailsContainer) {
                                detailsContainer.classList.remove('active');
                                pageContent.classList.remove('blur-active');
                            }
                        });
            
                        // Fermer avec la touche Échap
                        document.addEventListener('keydown', (e) => {
                            if (e.key === 'Escape' && detailsContainer.classList.contains('active')) {
                                detailsContainer.classList.remove('active');
                                pageContent.classList.remove('blur-active');
                            }
                        });
            
                        // Gestion du focus dans la fenêtre modale pour l'accessibilité
                        const focusableElements = detailsContent.querySelectorAll('button, [tabindex]');
                        const firstFocusable = focusableElements[0];
                        const lastFocusable = focusableElements[focusableElements.length - 1];
            
                        detailsContent.addEventListener('keydown', (e) => {
                            if (e.key === 'Tab') {
                                if (e.shiftKey && document.activeElement === firstFocusable) {
                                    e.preventDefault();
                                    lastFocusable.focus();
                                } else if (!e.shiftKey && document.activeElement === lastFocusable) {
                                    e.preventDefault();
                                    firstFocusable.focus();
                                }
                            }
                        });
            
                        // Gestion du bouton Réserver
                        reserveButton.addEventListener('click', () => {
                            const serviceId = reserveButton.dataset.serviceId;
                            const service = {
                                id: serviceId,
                                quantity: 1 // Données minimales attendues par le contrôleur
                            };
            
                            // Vérifier si le service est déjà dans le panier
                            if (!cartItems.some(item => item.id === serviceId)) {
                                // Ajouter à l'affichage local du panier
                                cartItems.push({
                                    id: serviceId,
                                    title: detailsTitle.textContent,
                                    price: detailsPrice.textContent,
                                    location: detailsLocation.textContent.replace('<i class="fas fa-map-marker-alt"></i> ', ''),
                                    type: detailsType.textContent.replace('<i class="fas fa-concierge-bell"></i> ', ''),
                                    quantity: 1
                                });
                                updateCartCount(cartItems.length);
            
                                // Envoyer le nouveau service au serveur via AJAX
                                fetch('{{ path('app_panier_add') }}', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json',
                                        'X-Requested-With': 'XMLHttpRequest',
                                        'X-CSRF-Token': '{{ csrf_token('panier') }}' // Ajout du token CSRF
                                    },
                                    body: JSON.stringify({ cartItems: [service] }) // Envoyer uniquement le nouveau service
                                })
                                .then(response => {
                                    if (!response.ok) {
                                        throw new Error(`Erreur HTTP: ${response.status} - ${response.statusText}`);
                                    }
                                    return response.json();
                                })
                                .then(data => {
                                    if (data.success) {
                                        showToast('success', 'Ajouté au panier', `Service "${detailsTitle.textContent}" ajouté au panier !`);
                                    } else {
                                        showToast('error', 'Erreur', data.message || 'Erreur lors de l\'ajout au panier.');
                                        // Revenir à l'état précédent du panier si l'ajout échoue
                                        cartItems = cartItems.filter(item => item.id !== serviceId);
                                        updateCartCount(cartItems.length);
                                    }
                                })
                                .catch(error => {
                                    console.error('Erreur AJAX:', error);
                                    showToast('error', 'Erreur de connexion', 'Erreur lors de la communication avec le serveur');
                                    // Revenir à l'état précédent du panier
                                    cartItems = cartItems.filter(item => item.id !== serviceId);
                                    updateCartCount(cartItems.length);
                                });
                            } else {
                                showToast('error', 'Déjà dans le panier', `Service "${detailsTitle.textContent}" est déjà dans le panier.`);
                            }
                        });
            
                        // Gestion du bouton de panier
                        cartButton.addEventListener('click', () => {
                            window.location.href = '{{ path('app_panier_index') }}';
                        });
            
                        // Accessibilité : activer le clic au clavier pour le bouton de panier
                        cartButton.addEventListener('keydown', (e) => {
                            if (e.key === 'Enter' || e.key === ' ') {
                                e.preventDefault();
                                cartButton.click();
                            }
                        });
            
                        // Accessibilité : activer le clic au clavier pour le bouton Réserver
                        reserveButton.addEventListener('keydown', (e) => {
                            if (e.key === 'Enter' || e.key === ' ') {
                                e.preventDefault();
                                reserveButton.click();
                            }
                        });
            
                        // Fonction pour mettre à jour le compteur du panier
                        function updateCartCount(count) {
                            cartCount.textContent = count;
                        }
            
                        // Initialisation AOS pour les animations
                        if (typeof AOS !== 'undefined') {
                            AOS.init({
                                duration: 800,
                                once: true,
                                offset: 100
                            });
                        }
            
                        // Accessibilité : focus sur les cartes
                        document.querySelectorAll('.card').forEach(card => {
                            card.addEventListener('keydown', (e) => {
                                if (e.key === 'Enter' || e.key === ' ') {
                                    e.preventDefault();
                                    card.click(); // Simuler un clic pour ouvrir les détails
                                }
                            });
                        });
            
                        // Fonction pour mettre à jour l'indicateur de défilement
                        window.addEventListener('scroll', function() {
                            const scrollPosition = window.scrollY;
                            const windowHeight = window.innerHeight;
                            const documentHeight = document.documentElement.scrollHeight;
                            const scrollPercentage = (scrollPosition / (documentHeight - windowHeight)) * 100;
                            
                            scrollProgress.style.width = scrollPercentage + '%';
                            
                            // Afficher/masquer le bouton retour en haut
                            if (scrollPosition > 300) {
                                backToTop.classList.add('visible');
                            } else {
                                backToTop.classList.remove('visible');
                            }
                        });
                        
                        // Fonction de retour en haut de page
                        backToTop.addEventListener('click', function() {
                            window.scrollTo({
                                top: 0,
                                behavior: 'smooth'
                            });
                        });

                        // Gestion des services complémentaires
                        const relatedServiceItems = document.querySelectorAll('.related-service-item');
                        relatedServiceItems.forEach(item => {
                            item.addEventListener('click', () => {
                                const title = item.querySelector('.related-service-title').textContent;
                                const price = item.querySelector('.related-service-price').textContent;
                                
                                showToast('success', 'Service ajouté', `Service complémentaire "${title}" (${price}) ajouté au panier !`);
                            });
                        });
                    } catch (error) {
                        console.error('Erreur lors de l\'initialisation des cartes de service:', error);
                    }
                });
            
                // Vue.js Card Hover Effect
                Vue.config.devtools = true;
            
                Vue.component('card', {
                    template: `
                        <div class="card-wrap"
                            @mousemove="handleMouseMove"
                            @mouseenter="handleMouseEnter"
                            @mouseleave="handleMouseLeave"
                            ref="card">
                            <div class="card"
                                :style="cardStyle">
                                <div class="card-bg" :style="[cardBgTransform, cardBgImage]"></div>
                                <div class="card-info">
                                    <slot name="header"></slot>
                                    <slot name="content"></slot>
                                </div>
                            </div>
                        </div>`,
                    mounted() {
                        this.width = this.$refs.card.offsetWidth;
                        this.height = this.$refs.card.offsetHeight;
                    },
                    props: ['dataImage'],
                    data: () => ({
                        width: 0,
                        height: 0,
                        mouseX: 0,
                        mouseY: 0,
                        mouseLeaveDelay: null
                    }),
                    computed: {
                        mousePX() {
                            return this.mouseX / this.width;
                        },
                        mousePY() {
                            return this.mouseY / this.height;
                        },
                        cardStyle() {
                            const rX = this.mousePX * 30;
                            const rY = this.mousePY * -30;
                            return {
                                transform: `rotateY(${rX}deg) rotateX(${rY}deg)`
                            };
                        },
                        cardBgTransform() {
                            const tX = this.mousePX * -40;
                            const tY = this.mousePY * -40;
                            return {
                                transform: `translateX(${tX}px) translateY(${tY}px)`
                            };
                        },
                        cardBgImage() {
                            return {
                                backgroundImage: `url(${this.dataImage})`
                            };
                        }
                    },
                    methods: {
                        handleMouseMove(e) {
                            this.mouseX = e.pageX - this.$refs.card.offsetLeft - this.width / 2;
                            this.mouseY = e.pageY - this.$refs.card.offsetTop - this.height / 2;
                        },
                        handleMouseEnter() {
                            clearTimeout(this.mouseLeaveDelay);
                        },
                        handleMouseLeave() {
                            this.mouseLeaveDelay = setTimeout(() => {
                                this.mouseX = 0;
                                this.mouseY = 0;
                            }, 1000);
                        }
                    }
                });
            
                const app = new Vue({
                    el: '#app'
                });
            </script>
        {% endblock %}
    </body>
</html>